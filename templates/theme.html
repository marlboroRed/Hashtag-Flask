<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í…Œë§ˆë³„ í•´ì‹œíƒœê·¸ ìƒì„±ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <div class="outer-wrapper">
    <div class="container">

      {% if not hashtags %}
      <!-- ì‚­ì œëœ ì œëª© ë¶€ë¶„: <h1 class="title-auto-fit">ì„ íƒí˜• ìë™ í•´ì‹œíƒœê·¸ ìƒì„±ê¸°</h1> -->
      <form method="POST">
        <div class="theme-box">
          {% for theme in themes %}
          <label>
            <input type="checkbox" name="themes" value="{{ theme }}" {% if theme in selected_themes %}checked{% endif %}>
            {{ theme }}
          </label>
          {% endfor %}
        </div>
        <button type="submit">í•´ì‹œíƒœê·¸ ì¶”ì²œ</button>
      </form>
      <button id="reward-ad-button">ê´‘ê³ ë³´ê³  ë‹¤ì‹œ ìƒì„±í•˜ê¸°</button>
      {% endif %}

      {% if hashtags %}
      <div class="result">
        <h3>ì¶”ì²œ í•´ì‹œíƒœê·¸</h3>
        <div id="hashtag-list">
          {% for tag in hashtags.split() %}
            <label class="hashtag-item">
              <input type="checkbox" class="tag-check" value="{{ tag }}">
              {{ tag }}
            </label>
          {% endfor %}
        </div>
        <div class="copy-buttons">
          <button onclick="copySelected()">ì„ íƒëœ í•­ëª© ë³µì‚¬</button>
          <button onclick="copyAll()">ì „ì²´ ë³µì‚¬</button>
        </div>
      </div>
      {% endif %}

      {% if message %}
      <p class="error">{{ message }}</p>
      {% endif %}

    </div>
  </div>

  <a href="/" class="home-button" title="ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°">
    <img src="/static/home-icon.png" alt="í™ˆìœ¼ë¡œ" class="home-icon">
  </a>
  
  <script>
    function copySelected() {
      const checks = document.querySelectorAll(".tag-check:checked");
      const tags = Array.from(checks).map(el => el.value).join(" ");
      if (tags) {
        navigator.clipboard.writeText(tags).then(() => alert("ì„ íƒëœ í•´ì‹œíƒœê·¸ ë³µì‚¬ ì™„ë£Œ!"));
      } else {
        alert("ì„ íƒëœ í•´ì‹œíƒœê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.");
      }
    }

    function copyAll() {
      const allTags = Array.from(document.querySelectorAll(".tag-check")).map(el => el.value).join(" ");
      navigator.clipboard.writeText(allTags).then(() => alert("ì „ì²´ ë³µì‚¬ ì™„ë£Œ!"));
    }
  </script>
<script src="/static/reward.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const errorBox = document.querySelector(".error");
    if (errorBox) {
      const btnContainer = document.createElement("div");
      btnContainer.className = "error-buttons";

      const dismissBtn = document.createElement("button")
      dismissBtn.textContent = "í™•ì¸";
      dismissBtn.className = "error-dismiss";
      dismissBtn.onclick = () => errorBox.style.display = "none";
      btnContainer.appendChild(dismissBtn);

      errorBox.appendChild(btnContainer);
    }

    const rewardAdButton = document.getElementById("reward-ad-button");
    if (rewardAdButton) {
      rewardAdButton.onclick = () => {
        console.log("ğŸ” HTML ë²„íŠ¼ í´ë¦­ë¨"); // âœ… ì¶”ê°€
        if (typeof AndroidAd !== "undefined" && AndroidAd.showRewardAd) {
          console.log("ğŸ“¡ AndroidAd.showRewardAd í˜¸ì¶œ ì‹œë„"); // âœ… ì¶”ê°€
          AndroidAd.showRewardAd(); 
        } else {
          console.log("âŒ AndroidAd ë˜ëŠ” showRewardAd ì—†ìŒ"); // âœ… ì¶”ê°€
          alert("ì•±ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.");
        }
      };
    }
  });
</script>

</body>
</html>
